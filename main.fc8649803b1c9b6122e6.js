(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{hi:()=>ue,MV:()=>ie,lH:()=>ee,xS:()=>G});var n=function(){function e(t){var n=t.renderer,r=t.containerSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=document.querySelector(r),this._renderer=n}var n,r;return n=e,(r=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n,r,o=this,i=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.code&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(i)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},a.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function c(e){var t,n=e.popupSelector,r=e.popupImageSelector,o=e.imageTitleSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,{popupSelector:n}))._popupPicture=t._popup.querySelector(r),t._pictureTitle=t._popup.querySelector(o),t}return t=c,(n=[{key:"open",value:function(e,t){a(f(c.prototype),"open",this).call(this),this._pictureTitle.textContent=e,this._popupPicture.src=t,this._popupPicture.alt=e}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function m(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e){var t,n,r,o,a=e.popupSelector,c=e.selectorsConfig,s=e.formSubmitHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o=function(){return t._userInputData={},t._inputFields.forEach((function(e){t._userInputData[e.name]=e.value})),t._userInputData},(r="_getInputValues")in(n=v(t=i.call(this,{popupSelector:a})))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._submitHandler=s,t._form=t._popup.querySelector(c.formSelector),t._submitButton=t._popup.querySelector(c.submitButtonSelector),t._inputFields=Array.from(t._popup.querySelectorAll(c.inputSelector)),t}return t=u,(n=[{key:"open",value:function(){y(k(u.prototype),"open",this).call(this)}},{key:"close",value:function(){y(k(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;y(k(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(){var t=e._submitButton.textContent;e._submitButton.textContent="Сохранение...",e._submitHandler(e._getInputValues()).then((function(){return e.close()})).finally((function(){return e._submitButton.textContent=t}))}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(o);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function L(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e){var t,n=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{popupSelector:n}))._confirmationButton=t._popup.querySelector(".popup__confirm-button"),t}return t=u,(n=[{key:"disableConfirmButton",value:function(){this._confirmationButton.setAttribute("disabled",!0)}},{key:"showDeletionProgress",value:function(){this._confirmationButton.textContent="Удаление..."}},{key:"_showDefaultButtonText",value:function(){this._confirmationButton.textContent="Да"}},{key:"open",value:function(){C(I(u.prototype),"open",this).call(this),this._showDefaultButtonText(),this._confirmationButton.removeAttribute("disabled")}},{key:"setConfirmationHandler",value:function(e){this._confirmationHandler=e}},{key:"setEventListeners",value:function(){var e=this;C(I(u.prototype),"setEventListeners",this).call(this),this._confirmationButton.addEventListener("click",(function(){return e._confirmationHandler()}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(o);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){var n=t.userNameSelector,r=t.userAboutSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userAbout=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._currentUserData={userName:this._userName.textContent,userAbout:this._userAbout.textContent},this._currentUserData}},{key:"setUserAvatar",value:function(e){this._userAvatar.style.backgroundImage="url(".concat(e,")")}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userAbout.textContent=e.about,this._userAvatar.alt=e.name}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Произошла ошибка, код ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"updateUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.main,about:e.secondary})}).then((function(e){return t._checkResponse(e)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}},{key:"getUploadedCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._checkResponse(t)})).then((function(e){return e.reverse()}))}},{key:"uploadNewCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.main,link:e.secondary})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"unlikeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),T=document.querySelector(".profile"),q=document.querySelector(".edit-form_type_profile-edit"),U=document.querySelector(".loading-popup"),x=document.querySelector(".profile__avatar"),H=T.querySelector(".profile__edit-button"),D=T.querySelector(".profile__add-button"),N=q.querySelector(".edit-form__input_type_name"),V=q.querySelector(".edit-form__input_type_about"),F={},J={formSelector:".edit-form",inputSelector:".edit-form__input",submitButtonSelector:".edit-form__submit-button",disabledSubmitButtonClass:"edit-form__submit-button_disabled",inputErrorClass:"edit-form__input_type_error"};function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t){var n=t.selectorsConfig,r=t.formElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=r,this._disabledSubmitButtonClass=n.disabledSubmitButtonClass,this._inputFieldErrorClass=n.inputErrorClass,this._submitButton=this._form.querySelector(n.submitButtonSelector),this._inputFields=Array.from(this._form.querySelectorAll(n.inputSelector))}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleSubmitButtonState(),this._inputFields.forEach((function(t){e._hideInputIsInvalid(t)}))}},{key:"enableSubmitButton",value:function(){this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this._disabledSubmitButtonClass)}},{key:"disableSubmitButton",value:function(){this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._disabledSubmitButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleSubmitButtonState(),this._inputFields.forEach((function(t){t.addEventListener("input",(function(){e._showInputValidityState(t),e._toggleSubmitButtonState()}))}))}},{key:"_toggleSubmitButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this.enableSubmitButton()}},{key:"_showInputValidityState",value:function(e){e.validity.valid?this._hideInputIsInvalid(e):this._showInputIsInvalid(e,e.validationMessage)}},{key:"_showInputIsInvalid",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputFieldErrorClass),n.textContent=t}},{key:"_hideInputIsInvalid",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputFieldErrorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputFields.some((function(e){return!e.validity.valid}))}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G,K=function(){function e(t){var n=t.cardData,r=t.cardSelector,o=t.userId,i=t.imageClickHandler,u=t.likeHandler,a=t.removeLikeHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardElement=document.querySelector(r),this._cardName=n.name,this._cardPic=n.link,this._cardOwnerId=n.owner._id,this._cardLikes=n.likes,this._userId=o,this._imageClickHandler=i,this._likeHandler=u,this._removeLikeHandler=a,this.cardId=n._id}var t,n;return t=e,(n=[{key:"_getCardTemplate",value:function(){return this._cardElement.content.querySelector(".grid-elements__item").cloneNode(!0)}},{key:"_updateLikeCounterState",value:function(e,t){"0"!=e.textContent||t>=1?e.style.display="block":e.style.display="none"}},{key:"_checkIfCardIsLiked",value:function(e){var t=this;return e.some((function(e){if(e._id===t._userId)return!0}))}},{key:"_handleLikeButton",value:function(){var e=this;this._checkIfCardIsLiked(this._cardLikes)?this._removeLikeHandler().then((function(t){return e._cardLikes=t.likes,e._cardLikes})).then((function(t){e._cardLikeCounter.textContent=t.length,e._updateLikeCounterState(e._cardLikeCounter,t.length)})).then((function(){return e._likeButton.classList.remove("card__like-button_active")})).catch((function(e){return console.error(e)})):this._likeHandler().then((function(t){return e._cardLikes=t.likes,e._cardLikes})).then((function(t){e._cardLikeCounter.textContent=t.length,e._updateLikeCounterState(e._cardLikeCounter,t.length)})).then((function(){return e._likeButton.classList.add("card__like-button_active")})).catch((function(e){return console.error(e)}))}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeButton()})),this._element.querySelector(".card__delete-button").addEventListener("click",(function(){e._openConfirmationPopup()})),this._cardImage.addEventListener("click",(function(){e._imageClickHandler(e._cardName,e._cardPic)}))}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"setTrashIconClickHandler",value:function(e){this._openConfirmationPopup=e}},{key:"createCard",value:function(){return this._element=this._getCardTemplate(),this._cardImage=this._element.querySelector(".card__photo"),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardLikeCounter=this._element.querySelector(".card__like-counter"),this._cardOwnerId===this._userId&&(this._deleteButton.style.display="block"),this._checkIfCardIsLiked(this._cardLikes)&&this._likeButton.classList.add("card__like-button_active"),this._setEventListeners(),this._element.querySelector(".card__name").textContent=this._cardName,this._cardImage.alt=this._cardName,this._cardImage.src=this._cardPic,this._cardLikeCounter.textContent=this._cardLikes.length,this._updateLikeCounterState(this._cardLikeCounter),this._element}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Q(e,t){ee.open(e,t)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=function(e){var t=new K({cardData:e,cardSelector:".cards-template",userId:G,imageClickHandler:Q,likeHandler:function(){return ue.likeCard(e._id).catch((function(e){return console.error(e)}))},removeLikeHandler:function(){return ue.unlikeCard(e._id).catch((function(e){return console.error(e)}))}});return t.setTrashIconClickHandler((function(){!function(e){ie.open(),ie.setConfirmationHandler((function(){ie.disableConfirmButton(),ie.showDeletionProgress(),ue.deleteCard(e.cardId).then((function(){e.removeCard()})).then((function(){return ie.close()})).catch((function(e){return console.error(e)}))}))}(t)})),t.createCard()}(e);Z.addItem(t)}var Y,Z=new n({renderer:function(e){X(e)},containerSelector:".grid-elements"}),ee=new p({popupSelector:".popup_type_opened-card",popupImageSelector:".popup__photo",imageTitleSelector:".popup__image-title"}),te=new B({userNameSelector:".profile__name",userAboutSelector:".profile__about",userAvatarSelector:".profile__avatar"}),ne=new S({popupSelector:".popup_type_profile-avatar-update",selectorsConfig:J,formSubmitHandler:function(e){return ue.updateUserAvatar(e.secondary).then((function(e){te.setUserAvatar(e.avatar)})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))}))}}),re=new S({popupSelector:".popup_type_profile-edit",selectorsConfig:J,formSubmitHandler:function(e){return ue.updateUserInfo(e).then((function(e){return te.setUserInfo(e)})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))}))}}),oe=new S({popupSelector:".popup_type_add-card",selectorsConfig:J,formSubmitHandler:function(e){return ue.uploadNewCard(e).then((function(e){X(e)})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))}))}}),ie=new P({popupSelector:".popup_type_delete-confirmation"}),ue=new R({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-44",headers:{authorization:"cf0c08f2-8f2d-418f-9eab-35c4104d8607","Content-Type":"application/json"}});Promise.all([ue.getUserInfo(),ue.getUploadedCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];te.setUserAvatar(o.avatar),te.setUserInfo(o),G=o._id,Z.renderItems(i),U.style.display="none"})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))})),Y=J,Array.from(document.querySelectorAll(Y.formSelector)).forEach((function(e){var t=new z({selectorsConfig:Y,formElement:e}),n=e.getAttribute("name");F[n]=t,t.enableValidation()})),x.addEventListener("click",(function(){ne.open(),F["avatar-updating-form"].resetValidation()})),H.addEventListener("click",(function(){var e=te.getUserInfo(),t=e.userName,n=e.userAbout;N.value=t,V.value=n,F["info-editing-form"].resetValidation(),re.open()})),D.addEventListener("click",(function(){oe.open(),F["card-adding-form"].resetValidation()})),oe.setEventListeners(),ne.setEventListeners(),re.setEventListeners(),ee.setEventListeners(),ie.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWFqQyxNQUFNd0YsUUFBVSxVQUU5QlMsT0FBTSxTQUFDQyxHQUFELE9BQVNDLFFBQVFDLE1BQVIsNEJBQW1DRixPRTNGcEJ4SSxFRjhGaEI4RSxFRTdGRW5FLE1BQU1DLEtBQ3JCN0MsU0FBUzhDLGlCQUFpQmIsRUFBZ0JRLGVBR25DckMsU0FBUSxTQUFDK0csR0FDaEIsSUFBTXFHLEVBQVksSUFBSXRHLEVBQWMsQ0FDbENqRixnQkFBaUJBLEVBQ2pCa0YsWUFBYUEsSUFFVHNHLEVBQVd0RyxFQUFZdUcsYUFBYSxRQUUxQzVHLEVBQWUyRyxHQUFZRCxFQUMzQkEsRUFBVUcsc0JGMEdkbEgsRUFBb0J6RixpQkFBaUIsU0FOckMsV0FDRXVMLEdBQW9CbEIsT0FDcEJ2RSxFQUFlLHdCQUFmQSxxQkFLRkosRUFBcUIxRixpQkFBaUIsU0F2QnRDLFdBQ0UsTUFBZ0NzTCxHQUFTYSxjQUFqQy9JLEVBQVIsRUFBUUEsU0FBVUMsRUFBbEIsRUFBa0JBLFVBRWxCdUMsRUFBZ0J0RSxNQUFROEIsRUFDeEJ5QyxFQUFpQnZFLE1BQVErQixFQUV6QnlDLEVBQWUscUJBQWZBLGtCQUNBOEYsR0FBYXZCLFVBaUJmMUUsRUFBaUIzRixpQkFBaUIsU0FibEMsV0FDRStMLEdBQWdCMUIsT0FDaEJ2RSxFQUFlLG9CQUFmQSxxQkFhRmlHLEdBQWdCYSxvQkFDaEJyQixHQUFvQnFCLG9CQUNwQmhCLEdBQWFnQixvQkFDYnhDLEdBQWV3QyxvQkFDZi9CLEdBQThCK0IscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL3V0aWxzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXNBcnJheSkge1xuICAgIGl0ZW1zQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgYWRkSXRlbShpdGVtSHRtbCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW1IdG1sKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQuY29kZSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIHBvcHVwSW1hZ2VTZWxlY3RvciwgaW1hZ2VUaXRsZVNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBQaWN0dXJlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihwb3B1cEltYWdlU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BpY3R1cmVUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoaW1hZ2VUaXRsZVNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgcGljKSB7XG4gICAgc3VwZXIub3BlbigpO1xuXG4gICAgdGhpcy5fcGljdHVyZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cFBpY3R1cmUuc3JjID0gcGljO1xuICAgIHRoaXMuX3BvcHVwUGljdHVyZS5hbHQgPSBuYW1lO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3Rvciwgc2VsZWN0b3JzQ29uZmlnLCBmb3JtU3VibWl0SGFuZGxlciB9KSB7XG4gICAgc3VwZXIoe1xuICAgICAgcG9wdXBTZWxlY3RvcixcbiAgICB9KTtcblxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBmb3JtU3VibWl0SGFuZGxlcjtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihzZWxlY3RvcnNDb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgc2VsZWN0b3JzQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yc0NvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzID0gKCkgPT4ge1xuICAgIHRoaXMuX3VzZXJJbnB1dERhdGEgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dEZpZWxkKSA9PiB7XG4gICAgICB0aGlzLl91c2VySW5wdXREYXRhW2lucHV0RmllbGQubmFtZV0gPSBpbnB1dEZpZWxkLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl91c2VySW5wdXREYXRhO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxUZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNsb3NlKCkpXG4gICAgICAgIC5maW5hbGx5KCgpID0+ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBpbml0aWFsVGV4dCkpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG5cbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5wb3B1cF9fY29uZmlybS1idXR0b24nXG4gICAgKTtcbiAgfVxuXG4gIGRpc2FibGVDb25maXJtQnV0dG9uKCkge1xuICAgIHRoaXMuX2NvbmZpcm1hdGlvbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gIH1cblxuICBzaG93RGVsZXRpb25Qcm9ncmVzcygpIHtcbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24udGV4dENvbnRlbnQgPSAn0KPQtNCw0LvQtdC90LjQtS4uLic7XG4gIH1cblxuICBfc2hvd0RlZmF1bHRCdXR0b25UZXh0KCkge1xuICAgIHRoaXMuX2NvbmZpcm1hdGlvbkJ1dHRvbi50ZXh0Q29udGVudCA9ICfQlNCwJztcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgc3VwZXIub3BlbigpO1xuXG4gICAgdGhpcy5fc2hvd0RlZmF1bHRCdXR0b25UZXh0KCk7XG4gICAgdGhpcy5fY29uZmlybWF0aW9uQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuXG4gIHNldENvbmZpcm1hdGlvbkhhbmRsZXIoc3VibWl0QWN0aW9uKSB7XG4gICAgdGhpcy5fY29uZmlybWF0aW9uSGFuZGxlciA9IHN1Ym1pdEFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgICAgdGhpcy5fY29uZmlybWF0aW9uSGFuZGxlcigpXG4gICAgKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJBYm91dFNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fY3VycmVudFVzZXJEYXRhID0ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgdXNlckFib3V0OiB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQsXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50VXNlckRhdGE7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKG5ld1VzZXJBdmF0YXIpIHtcbiAgICB0aGlzLl91c2VyQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtuZXdVc2VyQXZhdGFyfSlgO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fdXNlckF2YXRhci5hbHQgPSBuZXdVc2VyRGF0YS5uYW1lO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwLCDQutC+0LQgJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhuZXdQcm9maWxlRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5ld1Byb2ZpbGVEYXRhLm1haW4sXG4gICAgICAgIGFib3V0OiBuZXdQcm9maWxlRGF0YS5zZWNvbmRhcnksXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB1cGRhdGVVc2VyQXZhdGFyKGF2YXRhckxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZ2V0VXBsb2FkZWRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXG4gICAgICAudGhlbigocmVzKSA9PiByZXMucmV2ZXJzZSgpKTtcbiAgfVxuXG4gIHVwbG9hZE5ld0NhcmQodXNlckNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB1c2VyQ2FyZERhdGEubWFpbixcbiAgICAgICAgbGluazogdXNlckNhcmREYXRhLnNlY29uZGFyeSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cbn1cbiIsIi8vINCe0LHRitGP0LLQu9C10L3QuNC1INCy0YHQtdGFINC60L7QvdGB0YLQsNC90YJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xuY29uc3QgcHJvZmlsZUVkaXRpbmdGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5lZGl0LWZvcm1fdHlwZV9wcm9maWxlLWVkaXQnXG4pO1xuXG5leHBvcnQgY29uc3QgbG9hZGluZ1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRpbmctcG9wdXAnKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdGluZ0J1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcbiAgJy5wcm9maWxlX19lZGl0LWJ1dHRvbidcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1OYW1lID0gcHJvZmlsZUVkaXRpbmdGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICcuZWRpdC1mb3JtX19pbnB1dF90eXBlX25hbWUnXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1BYm91dCA9IHByb2ZpbGVFZGl0aW5nRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAnLmVkaXQtZm9ybV9faW5wdXRfdHlwZV9hYm91dCdcbik7XG5cbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLyDQntCx0YrQtdC60YIg0YHQviDQstGB0LXQvNC4INC60LvQsNGB0YHQsNC80Lgg0Lgg0YHQtdC70LXQutGC0L7RgNCw0LzQuCwg0LjRgdC/0L7Qu9GM0LfRg9C10LzRi9C80Lgg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxuZXhwb3J0IGNvbnN0IGZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZWRpdC1mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5lZGl0LWZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uJyxcbiAgZGlzYWJsZWRTdWJtaXRCdXR0b25DbGFzczogJ2VkaXQtZm9ybV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ2VkaXQtZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHsgc2VsZWN0b3JzQ29uZmlnLCBmb3JtRWxlbWVudCB9KSB7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2Rpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MgPSBzZWxlY3RvcnNDb25maWcuZGlzYWJsZWRTdWJtaXRCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEZpZWxkRXJyb3JDbGFzcyA9IHNlbGVjdG9yc0NvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgc2VsZWN0b3JzQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzQ29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRJc0ludmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Rpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2Rpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fc2hvd0lucHV0VmFsaWRpdHlTdGF0ZShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0VmFsaWRpdHlTdGF0ZShpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dElzSW52YWxpZChpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRJc0ludmFsaWQoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRJc0ludmFsaWQoaW5wdXQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yVGV4dCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG5cbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RmllbGRFcnJvckNsYXNzKTtcbiAgICBlcnJvclRleHQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0SXNJbnZhbGlkKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JUZXh0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcblxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRGaWVsZEVycm9yQ2xhc3MpO1xuICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRGaWVsZHMuc29tZSgoaW5wdXRGaWVsZCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEZpZWxkLnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyDQmNC80L/QvtGA0YLRiyDQutC+0LzQv9C+0L3QtdC90YLQvtCyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcblxuLy8g0JjQvNC/0L7RgNGCINCy0YHQtdGFINC90YPQttC90YvRhSDQutC+0L3RgdGC0LDQvdGCXG5pbXBvcnQge1xuICBwcm9maWxlQXZhdGFyQnV0dG9uLFxuICBwcm9maWxlRWRpdGluZ0J1dHRvbixcbiAgZm9ybVNlbGVjdG9yc0FuZENsYXNzZXMsXG4gIHByb2ZpbGVBZGRCdXR0b24sXG4gIHByb2ZpbGVGb3JtTmFtZSxcbiAgcHJvZmlsZUZvcm1BYm91dCxcbiAgZm9ybVZhbGlkYXRvcnMsXG4gIGxvYWRpbmdQb3B1cCxcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuLy8g0J/QtdGA0LXQvNC10L3QvdCw0Y8g0LTQu9GPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQvtCz0L4gSURcbmV4cG9ydCBsZXQgdXNlcklkO1xuXG4vLyDQmNC80L/QvtGA0YIg0LLRgdC10YUg0LLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3Ri9GFINGE0YPQvdC60YbQuNC5XG5pbXBvcnQgeyBjcmVhdGVDYXJkLCBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xuXG4vLyDQpNGD0L3QutGG0LjRjyDRgNC10L3QtNC10YDQuNC90LPQsCDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudEh0bWwgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50SHRtbCk7XG59XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBTZWN0aW9uXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICByZW5kZXJlcjogKGNhcmQpID0+IHtcbiAgICByZW5kZXJDYXJkKGNhcmQpO1xuICB9LFxuICBjb250YWluZXJTZWxlY3RvcjogJy5ncmlkLWVsZW1lbnRzJyxcbn0pO1xuXG4vLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9C+0L/QsNC/0LAg0LjQt9C+0LHRgNCw0LbQtdC90LjRj1xuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX29wZW5lZC1jYXJkJyxcbiAgcG9wdXBJbWFnZVNlbGVjdG9yOiAnLnBvcHVwX19waG90bycsXG4gIGltYWdlVGl0bGVTZWxlY3RvcjogJy5wb3B1cF9faW1hZ2UtdGl0bGUnLFxufSk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBVc2VySW5mb1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxuICB1c2VyQWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dCcsXG4gIHVzZXJBdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInLFxufSk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0L7Qv9Cw0L/QsCDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmNvbnN0IGF2YXRhclVwZGF0aW5nUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wcm9maWxlLWF2YXRhci11cGRhdGUnLFxuICBzZWxlY3RvcnNDb25maWc6IGZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzLFxuICBmb3JtU3VibWl0SGFuZGxlcjogKG5ld1Byb2ZpbGVBdmF0YXIpID0+IHtcbiAgICByZXR1cm4gYXBpXG4gICAgICAudXBkYXRlVXNlckF2YXRhcihuZXdQcm9maWxlQXZhdGFyLnNlY29uZGFyeSlcbiAgICAgIC50aGVuKCh1c2VyT2JqZWN0KSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlck9iamVjdC5hdmF0YXIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKSk7XG4gIH0sXG59KTtcblxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm1cbi8vINC00LvRjyDQv9C+0L/QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfcHJvZmlsZS1lZGl0JyxcbiAgc2VsZWN0b3JzQ29uZmlnOiBmb3JtU2VsZWN0b3JzQW5kQ2xhc3NlcyxcblxuICBmb3JtU3VibWl0SGFuZGxlcjogKG5ld1Byb2ZpbGVEYXRhKSA9PiB7XG4gICAgcmV0dXJuIGFwaVxuICAgICAgLnVwZGF0ZVVzZXJJbmZvKG5ld1Byb2ZpbGVEYXRhKVxuICAgICAgLnRoZW4oKG5ld1Byb2ZpbGVEYXRhKSA9PiB1c2VySW5mby5zZXRVc2VySW5mbyhuZXdQcm9maWxlRGF0YSkpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCkpO1xuICB9LFxufSk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtXG4vLyDQtNC70Y8g0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGNhcmRBZGRpbmdQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX2FkZC1jYXJkJyxcbiAgc2VsZWN0b3JzQ29uZmlnOiBmb3JtU2VsZWN0b3JzQW5kQ2xhc3NlcyxcblxuICBmb3JtU3VibWl0SGFuZGxlcjogKHVzZXJDYXJkRGF0YSkgPT4ge1xuICAgIHJldHVybiBhcGlcbiAgICAgIC51cGxvYWROZXdDYXJkKHVzZXJDYXJkRGF0YSlcbiAgICAgIC50aGVuKCh1c2VyQ2FyZERhdGEpID0+IHtcbiAgICAgICAgcmVuZGVyQ2FyZCh1c2VyQ2FyZERhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKSk7XG4gIH0sXG59KTtcblxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QvtC/0LDQv9CwINGBINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNC10Lwg0YPQtNCw0LvQtdC90LjRj1xuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9kZWxldGUtY29uZmlybWF0aW9uJyxcbn0pO1xuXG4vLyDQmNC90LjQsNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBBcGlcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDQnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJ2NmMGMwOGYyLThmMmQtNDE4Zi05ZWFiLTM1YzQxMDRkODYwNycsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSxcbn0pO1xuXG4vLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDRjtC30LXRgNC1INC4INC10LPQviDQsNCy0LDRgtCw0YDQutC4INGBINGB0LXRgNCy0LXRgNCwINC90LAg0YHRgtGA0LDQvdC40YbRg1xuLy8g0Lgg0LfQsNCz0YDRg9C30LrQsCDQstGB0LXRhSDQutCw0YDRgtC+0YfQtdC6XG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRVcGxvYWRlZENhcmRzKCldKVxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgICBsb2FkaW5nUG9wdXAuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApKTtcblxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxuZW5hYmxlVmFsaWRhdGlvbihmb3JtU2VsZWN0b3JzQW5kQ2xhc3Nlcyk7XG5cbi8vINCk0YPQvdC60YbQuNGPLCDQvtGC0LrRgNGL0LLQsNGO0YnQsNGPINC/0L7Qv9Cw0L8g0YEg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtdC8INC/0YDQvtGE0LjQu9GPXG5mdW5jdGlvbiBvcGVuUHJvZmlsZVBvcHVwKCkge1xuICBjb25zdCB7IHVzZXJOYW1lLCB1c2VyQWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgcHJvZmlsZUZvcm1OYW1lLnZhbHVlID0gdXNlck5hbWU7XG4gIHByb2ZpbGVGb3JtQWJvdXQudmFsdWUgPSB1c2VyQWJvdXQ7XG5cbiAgZm9ybVZhbGlkYXRvcnNbJ2luZm8tZWRpdGluZy1mb3JtJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPLCDQvtGC0LrRgNGL0LLQsNGO0YnQsNGPINC/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XG5mdW5jdGlvbiBvcGVuQ2FyZEFkZGluZ1BvcHVwKCkge1xuICBjYXJkQWRkaW5nUG9wdXAub3BlbigpO1xuICBmb3JtVmFsaWRhdG9yc1snY2FyZC1hZGRpbmctZm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xufVxuXG5mdW5jdGlvbiBvcGVuQXZhdGFyVXBkYXRpbmdQb3B1cCgpIHtcbiAgYXZhdGFyVXBkYXRpbmdQb3B1cC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0b3JzWydhdmF0YXItdXBkYXRpbmctZm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xufVxuXG4vLyDQlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC70YPRiNCw0YLQtdC70LXQuVxucHJvZmlsZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5BdmF0YXJVcGRhdGluZ1BvcHVwKTtcbnByb2ZpbGVFZGl0aW5nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblByb2ZpbGVQb3B1cCk7XG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkNhcmRBZGRpbmdQb3B1cCk7XG5cbmNhcmRBZGRpbmdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYXZhdGFyVXBkYXRpbmdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoRGVsZXRpb25Db25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgY2FyZERhdGEsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIHVzZXJJZCxcbiAgICBpbWFnZUNsaWNrSGFuZGxlcixcbiAgICBsaWtlSGFuZGxlcixcbiAgICByZW1vdmVMaWtlSGFuZGxlcixcbiAgfSkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmROYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9jYXJkUGljID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9jYXJkT3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSBjYXJkRGF0YS5saWtlcztcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG5cbiAgICB0aGlzLl9pbWFnZUNsaWNrSGFuZGxlciA9IGltYWdlQ2xpY2tIYW5kbGVyO1xuICAgIHRoaXMuX2xpa2VIYW5kbGVyID0gbGlrZUhhbmRsZXI7XG4gICAgdGhpcy5fcmVtb3ZlTGlrZUhhbmRsZXIgPSByZW1vdmVMaWtlSGFuZGxlcjtcblxuICAgIHRoaXMuY2FyZElkID0gY2FyZERhdGEuX2lkO1xuICB9XG5cbiAgX2dldENhcmRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSB0aGlzLl9jYXJkRWxlbWVudC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmdyaWQtZWxlbWVudHNfX2l0ZW0nKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuICBfdXBkYXRlTGlrZUNvdW50ZXJTdGF0ZShjYXJkTGlrZUNvdW50ZXIsIGNhcmRMaWtlc0FycmF5TGVuZ3RoKSB7XG4gICAgaWYgKGNhcmRMaWtlQ291bnRlci50ZXh0Q29udGVudCAhPSAnMCcgfHwgY2FyZExpa2VzQXJyYXlMZW5ndGggPj0gMSkge1xuICAgICAgY2FyZExpa2VDb3VudGVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYXJkTGlrZUNvdW50ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gIH1cblxuICBfY2hlY2tJZkNhcmRJc0xpa2VkKGxpa2VzKSB7XG4gICAgcmV0dXJuIGxpa2VzLnNvbWUoKGxpa2VFbGVtZW50KSA9PiB7XG4gICAgICBpZiAobGlrZUVsZW1lbnQuX2lkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICBpZiAoIXRoaXMuX2NoZWNrSWZDYXJkSXNMaWtlZCh0aGlzLl9jYXJkTGlrZXMpKSB7XG4gICAgICB0aGlzLl9saWtlSGFuZGxlcigpXG4gICAgICAgIC50aGVuKChsaWtlc09iamVjdCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NhcmRMaWtlcyA9IGxpa2VzT2JqZWN0Lmxpa2VzO1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZXM7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChsaWtlc0FycmF5KSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2FyZExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZXNBcnJheS5sZW5ndGg7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlTGlrZUNvdW50ZXJTdGF0ZShcbiAgICAgICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlcixcbiAgICAgICAgICAgIGxpa2VzQXJyYXkubGVuZ3RoXG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2VIYW5kbGVyKClcbiAgICAgICAgLnRoZW4oKGxpa2VzT2JqZWN0KSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2FyZExpa2VzID0gbGlrZXNPYmplY3QubGlrZXM7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRMaWtlcztcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKGxpa2VzQXJyYXkpID0+IHtcbiAgICAgICAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBsaWtlc0FycmF5Lmxlbmd0aDtcbiAgICAgICAgICB0aGlzLl91cGRhdGVMaWtlQ291bnRlclN0YXRlKFxuICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VDb3VudGVyLFxuICAgICAgICAgICAgbGlrZXNBcnJheS5sZW5ndGhcbiAgICAgICAgICApO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PlxuICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJylcbiAgICAgICAgKVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8g0KHQu9GD0YjQsNGC0LXQu9GMINC60L3QvtC/0LrQuCDQu9Cw0LnQutCwXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICB9KTtcblxuICAgIC8vINCh0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5fb3BlbkNvbmZpcm1hdGlvblBvcHVwKCk7XG4gICAgICB9KTtcblxuICAgIC8qINCh0LvRg9GI0LDRgtC10LvRjCDQvdCwINC40LfQvtCx0YDQsNC20LXQvdC40LUg0LIg0LrQsNGA0YLQvtGH0LrQtVxuICAgICAg0LTQu9GPINC+0YLQutGA0YvRgtC40Y8g0YTRg9C70YHQutGA0LjQvSDQv9C+0L/QsNC/0LAgKi9cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9pbWFnZUNsaWNrSGFuZGxlcih0aGlzLl9jYXJkTmFtZSwgdGhpcy5fY2FyZFBpYyk7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBzZXRUcmFzaEljb25DbGlja0hhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuX29wZW5Db25maXJtYXRpb25Qb3B1cCA9IGhhbmRsZXI7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRDYXJkVGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19waG90bycpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKTtcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcblxuICAgIGlmICh0aGlzLl9jYXJkT3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NoZWNrSWZDYXJkSXNMaWtlZCh0aGlzLl9jYXJkTGlrZXMpKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgIH1cblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkTmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fY2FyZE5hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2NhcmRQaWM7XG4gICAgdGhpcy5fY2FyZExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZExpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl91cGRhdGVMaWtlQ291bnRlclN0YXRlKHRoaXMuX2NhcmRMaWtlQ291bnRlcik7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgeyBmb3JtVmFsaWRhdG9ycyB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IHtcbiAgYXBpLFxuICBwb3B1cFdpdGhEZWxldGlvbkNvbmZpcm1hdGlvbixcbiAgcG9wdXBXaXRoSW1hZ2UsXG4gIHVzZXJJZCxcbn0gZnJvbSAnLi4vcGFnZXMvaW5kZXguanMnO1xuXG4vLyDQpNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LIg0YTRg9C70YHQutGA0LjQvVxuZnVuY3Rpb24gb3BlbkZ1bGxzY3JlZW5JbWFnZShuYW1lLCBwaWMpIHtcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBwaWMpO1xufVxuXG5mdW5jdGlvbiBvcGVuQ2FyZERlbGV0aW9uUG9wdXAoY2FyZCkge1xuICBwb3B1cFdpdGhEZWxldGlvbkNvbmZpcm1hdGlvbi5vcGVuKCk7XG4gIHBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uLnNldENvbmZpcm1hdGlvbkhhbmRsZXIoKCkgPT4ge1xuICAgIHBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uLmRpc2FibGVDb25maXJtQnV0dG9uKCk7XG4gICAgcG9wdXBXaXRoRGVsZXRpb25Db25maXJtYXRpb24uc2hvd0RlbGV0aW9uUHJvZ3Jlc3MoKTtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuY2FyZElkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiBwb3B1cFdpdGhEZWxldGlvbkNvbmZpcm1hdGlvbi5jbG9zZSgpKVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gIH0pO1xufVxuXG4vLyDQpNGD0L3QutGG0LjRjyDQstC60LvRjtGH0LXQvdC40Y8g0LLQsNC70LjQtNCw0YbQuNC4INC00LvRjyDQstGB0LXRhSDRhNC+0YDQvCDQvdCwINGB0YLRgNCw0L3QuNGG0LVcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHNlbGVjdG9yc0NvbmZpZykge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnNDb25maWcuZm9ybVNlbGVjdG9yKVxuICApO1xuXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioe1xuICAgICAgc2VsZWN0b3JzQ29uZmlnOiBzZWxlY3RvcnNDb25maWcsXG4gICAgICBmb3JtRWxlbWVudDogZm9ybUVsZW1lbnQsXG4gICAgfSk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn1cblxuLy8g0KTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgY2FyZERhdGE6IGNhcmREYXRhLFxuICAgIGNhcmRTZWxlY3RvcjogJy5jYXJkcy10ZW1wbGF0ZScsXG4gICAgdXNlcklkOiB1c2VySWQsXG4gICAgaW1hZ2VDbGlja0hhbmRsZXI6IG9wZW5GdWxsc2NyZWVuSW1hZ2UsXG4gICAgbGlrZUhhbmRsZXI6ICgpID0+XG4gICAgICBhcGkubGlrZUNhcmQoY2FyZERhdGEuX2lkKS5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpLFxuICAgIHJlbW92ZUxpa2VIYW5kbGVyOiAoKSA9PlxuICAgICAgYXBpLnVubGlrZUNhcmQoY2FyZERhdGEuX2lkKS5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpLFxuICB9KTtcbiAgY2FyZC5zZXRUcmFzaEljb25DbGlja0hhbmRsZXIoKCkgPT4ge1xuICAgIG9wZW5DYXJkRGVsZXRpb25Qb3B1cChjYXJkKTtcbiAgfSk7XG4gIHJldHVybiBjYXJkLmNyZWF0ZUNhcmQoKTtcbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwidGhpcyIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJpdGVtc0FycmF5IiwiZm9yRWFjaCIsIml0ZW0iLCJpdGVtSHRtbCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJjb2RlIiwiY2xvc2UiLCJfcG9wdXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJwb3B1cEltYWdlU2VsZWN0b3IiLCJpbWFnZVRpdGxlU2VsZWN0b3IiLCJfcG9wdXBQaWN0dXJlIiwiX3BpY3R1cmVUaXRsZSIsIm5hbWUiLCJwaWMiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIlBvcHVwV2l0aEZvcm0iLCJzZWxlY3RvcnNDb25maWciLCJmb3JtU3VibWl0SGFuZGxlciIsIl91c2VySW5wdXREYXRhIiwiX2lucHV0RmllbGRzIiwiaW5wdXRGaWVsZCIsInZhbHVlIiwiX3N1Ym1pdEhhbmRsZXIiLCJfZm9ybSIsImZvcm1TZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwicmVzZXQiLCJpbml0aWFsVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInRoZW4iLCJmaW5hbGx5IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX2NvbmZpcm1hdGlvbkJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsIl9zaG93RGVmYXVsdEJ1dHRvblRleHQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzdWJtaXRBY3Rpb24iLCJfY29uZmlybWF0aW9uSGFuZGxlciIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJBYm91dFNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dCIsIl91c2VyQXZhdGFyIiwiX2N1cnJlbnRVc2VyRGF0YSIsInVzZXJOYW1lIiwidXNlckFib3V0IiwibmV3VXNlckF2YXRhciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwibmV3VXNlckRhdGEiLCJhYm91dCIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJfY2hlY2tSZXNwb25zZSIsIm5ld1Byb2ZpbGVEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtYWluIiwic2Vjb25kYXJ5IiwiYXZhdGFyTGluayIsImF2YXRhciIsInJldmVyc2UiLCJ1c2VyQ2FyZERhdGEiLCJsaW5rIiwiY2FyZElkIiwicHJvZmlsZSIsInByb2ZpbGVFZGl0aW5nRm9ybSIsImxvYWRpbmdQb3B1cCIsInByb2ZpbGVBdmF0YXJCdXR0b24iLCJwcm9maWxlRWRpdGluZ0J1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlRm9ybU5hbWUiLCJwcm9maWxlRm9ybUFib3V0IiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3JzQW5kQ2xhc3NlcyIsImRpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfZGlzYWJsZWRTdWJtaXRCdXR0b25DbGFzcyIsIl9pbnB1dEZpZWxkRXJyb3JDbGFzcyIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dElzSW52YWxpZCIsIl9zaG93SW5wdXRWYWxpZGl0eVN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlbmFibGVTdWJtaXRCdXR0b24iLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0SXNJbnZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvclRleHQiLCJpZCIsInNvbWUiLCJ1c2VySWQiLCJDYXJkIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJpbWFnZUNsaWNrSGFuZGxlciIsImxpa2VIYW5kbGVyIiwicmVtb3ZlTGlrZUhhbmRsZXIiLCJfY2FyZEVsZW1lbnQiLCJfY2FyZE5hbWUiLCJfY2FyZFBpYyIsIl9jYXJkT3duZXJJZCIsIm93bmVyIiwiX2lkIiwiX2NhcmRMaWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl9pbWFnZUNsaWNrSGFuZGxlciIsIl9saWtlSGFuZGxlciIsIl9yZW1vdmVMaWtlSGFuZGxlciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkTGlrZUNvdW50ZXIiLCJjYXJkTGlrZXNBcnJheUxlbmd0aCIsImRpc3BsYXkiLCJsaWtlRWxlbWVudCIsIl9jaGVja0lmQ2FyZElzTGlrZWQiLCJsaWtlc09iamVjdCIsImxpa2VzQXJyYXkiLCJfY2FyZExpa2VDb3VudGVyIiwibGVuZ3RoIiwiX3VwZGF0ZUxpa2VDb3VudGVyU3RhdGUiLCJfbGlrZUJ1dHRvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfZWxlbWVudCIsIl9vcGVuQ29uZmlybWF0aW9uUG9wdXAiLCJfY2FyZEltYWdlIiwiaGFuZGxlciIsIl9nZXRDYXJkVGVtcGxhdGUiLCJfZGVsZXRlQnV0dG9uIiwib3BlbkZ1bGxzY3JlZW5JbWFnZSIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsInJlbmRlckNhcmQiLCJjYXJkRWxlbWVudEh0bWwiLCJjYXJkIiwiYXBpIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwic2V0VHJhc2hJY29uQ2xpY2tIYW5kbGVyIiwicG9wdXBXaXRoRGVsZXRpb25Db25maXJtYXRpb24iLCJzZXRDb25maXJtYXRpb25IYW5kbGVyIiwiZGlzYWJsZUNvbmZpcm1CdXR0b24iLCJzaG93RGVsZXRpb25Qcm9ncmVzcyIsInJlbW92ZUNhcmQiLCJvcGVuQ2FyZERlbGV0aW9uUG9wdXAiLCJjcmVhdGVDYXJkIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJ1c2VySW5mbyIsImF2YXRhclVwZGF0aW5nUG9wdXAiLCJuZXdQcm9maWxlQXZhdGFyIiwidXBkYXRlVXNlckF2YXRhciIsInVzZXJPYmplY3QiLCJzZXRVc2VyQXZhdGFyIiwicHJvZmlsZVBvcHVwIiwidXBkYXRlVXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhcmRBZGRpbmdQb3B1cCIsInVwbG9hZE5ld0NhcmQiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRVcGxvYWRlZENhcmRzIiwidXNlckRhdGEiLCJjYXJkcyIsInJlbmRlckl0ZW1zIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9