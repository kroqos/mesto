(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{hi:()=>ue,MV:()=>ie,lH:()=>ee,xS:()=>G});var n=function(){function e(t){var n=t.renderer,r=t.containerSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=document.querySelector(r),this._renderer=n}var n,r;return n=e,(r=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n,r,o=this,i=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.code&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(i)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&e.close()}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=c(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},a.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function c(e){var t,n=e.popupSelector,r=e.popupImageSelector,o=e.imageTitleSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,{popupSelector:n}))._popupPicture=t._popup.querySelector(r),t._pictureTitle=t._popup.querySelector(o),t}return t=c,(n=[{key:"open",value:function(e,t){a(f(c.prototype),"open",this).call(this),this._pictureTitle.textContent=e,this._popupPicture.src=t,this._popupPicture.alt=e}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(o);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function m(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e){var t,n,r,o,a=e.popupSelector,c=e.selectorsConfig,s=e.formSubmitHandler,l=e.submitButtonText;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o=function(){return t._userInputData={},t._inputFields.forEach((function(e){t._userInputData[e.name]=e.value})),t._userInputData},(r="_getInputValues")in(n=v(t=i.call(this,{popupSelector:a})))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._submitButtonText=l,t._submitHandler=s,t._form=t._popup.querySelector(c.formSelector),t._submitButton=t._popup.querySelector(c.submitButtonSelector),t._inputFields=Array.from(t._popup.querySelectorAll(c.inputSelector)),t}return t=u,(n=[{key:"open",value:function(){y(k(u.prototype),"open",this).call(this),this._submitButton.textContent=this._submitButtonText}},{key:"close",value:function(){y(k(u.prototype),"close",this).call(this),this._form.reset()}},{key:"showSavingProgress",value:function(){this._submitButton.textContent="Сохранение..."}},{key:"setEventListeners",value:function(){var e=this;y(k(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(){return e._submitHandler(e._getInputValues())}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(o);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function L(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e){var t,n=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,{popupSelector:n}))._confirmationButton=t._popup.querySelector(".popup__confirm-button"),t}return t=u,(n=[{key:"disableConfirmButton",value:function(){this._confirmationButton.setAttribute("disabled",!0)}},{key:"showDeletionProgress",value:function(){this._confirmationButton.textContent="Удаление..."}},{key:"_showDefaultButtonText",value:function(){this._confirmationButton.textContent="Да"}},{key:"open",value:function(){C(I(u.prototype),"open",this).call(this),this._showDefaultButtonText(),this._confirmationButton.removeAttribute("disabled")}},{key:"setConfirmationHandler",value:function(e){this._confirmationHandler=e}},{key:"setEventListeners",value:function(){var e=this;C(I(u.prototype),"setEventListeners",this).call(this),this._confirmationButton.addEventListener("click",(function(){return e._confirmationHandler()}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(o);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t){var n=t.userNameSelector,r=t.userAboutSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userAbout=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._currentUserData={userName:this._userName.textContent,userAbout:this._userAbout.textContent},this._currentUserData}},{key:"setUserAvatar",value:function(e){this._userAvatar.style.backgroundImage="url(".concat(e,")")}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userAbout.textContent=e.about,this._userAvatar.alt=e.name}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Произошла ошибка, код ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"updateUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.main,about:e.secondary})}).then((function(e){return t._checkResponse(e)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}},{key:"getUploadedCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._checkResponse(t)})).then((function(e){return e.reverse()}))}},{key:"uploadNewCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.main,link:e.secondary})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"unlikeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),R=document.querySelector(".profile"),q=document.querySelector(".edit-form_type_profile-edit"),x=document.querySelector(".loading-popup"),U=document.querySelector(".profile__avatar"),H=R.querySelector(".profile__edit-button"),D=R.querySelector(".profile__add-button"),N=q.querySelector(".edit-form__input_type_name"),V=q.querySelector(".edit-form__input_type_about"),F={},J={formSelector:".edit-form",inputSelector:".edit-form__input",submitButtonSelector:".edit-form__submit-button",disabledSubmitButtonClass:"edit-form__submit-button_disabled",inputErrorClass:"edit-form__input_type_error"};function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t){var n=t.selectorsConfig,r=t.formElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=r,this._disabledSubmitButtonClass=n.disabledSubmitButtonClass,this._inputFieldErrorClass=n.inputErrorClass,this._submitButton=this._form.querySelector(n.submitButtonSelector),this._inputFields=Array.from(this._form.querySelectorAll(n.inputSelector))}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleSubmitButtonState(),this._inputFields.forEach((function(t){e._hideInputIsInvalid(t)}))}},{key:"enableSubmitButton",value:function(){this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this._disabledSubmitButtonClass)}},{key:"disableSubmitButton",value:function(){this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._disabledSubmitButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleSubmitButtonState(),this._inputFields.forEach((function(t){t.addEventListener("input",(function(){e._showInputValidityState(t),e._toggleSubmitButtonState()}))}))}},{key:"_toggleSubmitButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this.enableSubmitButton()}},{key:"_showInputValidityState",value:function(e){e.validity.valid?this._hideInputIsInvalid(e):this._showInputIsInvalid(e,e.validationMessage)}},{key:"_showInputIsInvalid",value:function(e,t){var n=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputFieldErrorClass),n.textContent=t}},{key:"_hideInputIsInvalid",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputFieldErrorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputFields.some((function(e){return!e.validity.valid}))}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G,K=function(){function e(t){var n=t.cardData,r=t.cardSelector,o=t.userId,i=t.imageClickHandler,u=t.likeHandler,a=t.removeLikeHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardElement=document.querySelector(r),this._cardName=n.name,this._cardPic=n.link,this._cardOwnerId=n.owner._id,this._cardLikes=n.likes,this._userId=o,this._imageClickHandler=i,this._likeHandler=u,this._removeLikeHandler=a,this.cardId=n._id}var t,n;return t=e,(n=[{key:"_getCardTemplate",value:function(){return this._cardElement.content.querySelector(".grid-elements__item").cloneNode(!0)}},{key:"_updateLikeCounterState",value:function(e,t){"0"!=e.textContent||t>=1?e.style.display="block":e.style.display="none"}},{key:"_checkIfCardIsLiked",value:function(e){var t=this;return e.some((function(e){if(e._id===t._userId)return!0}))}},{key:"_handleLikeButton",value:function(){var e=this;this._checkIfCardIsLiked(this._cardLikes)?this._removeLikeHandler().then((function(t){return e._cardLikes=t.likes,e._cardLikes})).then((function(t){e._cardLikeCounter.textContent=t.length,e._updateLikeCounterState(e._cardLikeCounter,t.length)})).then((function(){return e._likeButton.classList.remove("card__like-button_active")})).catch((function(e){return console.error(e)})):this._likeHandler().then((function(t){return e._cardLikes=t.likes,e._cardLikes})).then((function(t){e._cardLikeCounter.textContent=t.length,e._updateLikeCounterState(e._cardLikeCounter,t.length)})).then((function(){return e._likeButton.classList.add("card__like-button_active")})).catch((function(e){return console.error(e)}))}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeButton()})),this._element.querySelector(".card__delete-button").addEventListener("click",(function(){e._openConfirmationPopup()})),this._cardImage.addEventListener("click",(function(){e._imageClickHandler(e._cardName,e._cardPic)}))}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"setTrashIconClickHandler",value:function(e){this._openConfirmationPopup=e}},{key:"createCard",value:function(){return this._element=this._getCardTemplate(),this._cardImage=this._element.querySelector(".card__photo"),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardLikeCounter=this._element.querySelector(".card__like-counter"),this._cardOwnerId===this._userId&&(this._deleteButton.style.display="block"),this._checkIfCardIsLiked(this._cardLikes)&&this._likeButton.classList.add("card__like-button_active"),this._setEventListeners(),this._element.querySelector(".card__name").textContent=this._cardName,this._cardImage.alt=this._cardName,this._cardImage.src=this._cardPic,this._cardLikeCounter.textContent=this._cardLikes.length,this._updateLikeCounterState(this._cardLikeCounter),this._element}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Q(e,t){ee.open(e,t)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=function(e){var t=new K({cardData:e,cardSelector:".cards-template",userId:G,imageClickHandler:Q,likeHandler:function(){return ue.likeCard(e._id).catch((function(e){return console.error(e)}))},removeLikeHandler:function(){return ue.unlikeCard(e._id).catch((function(e){return console.error(e)}))}});return t.setTrashIconClickHandler((function(){!function(e){ie.open(),ie.setConfirmationHandler((function(){ie.disableConfirmButton(),ie.showDeletionProgress(),ue.deleteCard(e.cardId).then((function(){e.removeCard()})).then((function(){return ie.close()})).catch((function(e){return console.error(e)}))}))}(t)})),t.createCard()}(e);Z.addItem(t)}var Y,Z=new n({renderer:function(e){X(e)},containerSelector:".grid-elements"}),ee=new p({popupSelector:".popup_type_opened-card",popupImageSelector:".popup__photo",imageTitleSelector:".popup__image-title"}),te=new B({userNameSelector:".profile__name",userAboutSelector:".profile__about",userAvatarSelector:".profile__avatar"}),ne=new S({popupSelector:".popup_type_profile-avatar-update",selectorsConfig:J,formSubmitHandler:function(e){ne.showSavingProgress(),ue.updateUserAvatar(e.secondary).then((function(e){te.setUserAvatar(e.avatar)})).then((function(){return ne.close()})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))}))},submitButtonText:"Сохранить"}),re=new S({popupSelector:".popup_type_profile-edit",selectorsConfig:J,formSubmitHandler:function(e){re.showSavingProgress(),ue.updateUserInfo(e).then((function(e){return te.setUserInfo(e)})).then((function(){return re.close()})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))}))},submitButtonText:"Сохранить"}),oe=new S({popupSelector:".popup_type_add-card",selectorsConfig:J,formSubmitHandler:function(e){oe.showSavingProgress(),ue.uploadNewCard(e).then((function(e){X(e)})).then((function(){return oe.close()})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))}))},submitButtonText:"Создать"}),ie=new P({popupSelector:".popup_type_delete-confirmation"}),ue=new A({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-44",headers:{authorization:"cf0c08f2-8f2d-418f-9eab-35c4104d8607","Content-Type":"application/json"}});Promise.all([ue.getUserInfo(),ue.getUploadedCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];te.setUserAvatar(o.avatar),te.setUserInfo(o),G=o._id,Z.renderItems(i),x.style.display="none"})).catch((function(e){return console.error("Произошла ошибка: ".concat(e))})),Y=J,Array.from(document.querySelectorAll(Y.formSelector)).forEach((function(e){var t=new z({selectorsConfig:Y,formElement:e}),n=e.getAttribute("name");F[n]=t,t.enableValidation()})),U.addEventListener("click",(function(){ne.open(),F["avatar-updating-form"].resetValidation()})),H.addEventListener("click",(function(){var e=te.getUserInfo(),t=e.userName,n=e.userAbout;N.value=t,V.value=n,F["info-editing-form"].resetValidation(),re.open()})),D.addEventListener("click",(function(){oe.open(),F["card-adding-form"].resetValidation()})),oe.setEventListeners(),ne.setEventListeners(),re.setEventListeners(),ee.setEventListeners(),ie.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxFQUFxQixLQUFYQyxFQUFXLEtBQzNCakIsR0FBU00sY0FBY1UsRUFBU3JILFFBQ2hDcUcsR0FBU1MsWUFBWU8sR0FDckI5RSxFQUFTOEUsRUFBU2xFLElBQ2xCZ0QsRUFBUW9CLFlBQVlELEdBQ3BCL0csRUFBYWxDLE1BQU15RixRQUFVLFVBRTlCUyxPQUFNLFNBQUNDLEdBQUQsT0FBU0MsUUFBUUMsTUFBUiw0QkFBbUNGLE9FcEdwQnhJLEVGdUdoQjhFLEVFdEdFakUsTUFBTUMsS0FDckIvQyxTQUFTZ0QsaUJBQWlCZixFQUFnQlUsZUFHbkN2QyxTQUFRLFNBQUMrRyxHQUNoQixJQUFNc0csRUFBWSxJQUFJdkcsRUFBYyxDQUNsQ2pGLGdCQUFpQkEsRUFDakJrRixZQUFhQSxJQUVUdUcsRUFBV3ZHLEVBQVl3RyxhQUFhLFFBRTFDN0csRUFBZTRHLEdBQVlELEVBQzNCQSxFQUFVRyxzQkZtSGRuSCxFQUFvQnpGLGlCQUFpQixTQU5yQyxXQUNFdUwsR0FBb0JsQixPQUNwQnZFLEVBQWUsd0JBQWZBLHFCQUtGSixFQUFxQjFGLGlCQUFpQixTQXZCdEMsV0FDRSxNQUFnQ3NMLEdBQVNjLGNBQWpDakosRUFBUixFQUFRQSxTQUFVQyxFQUFsQixFQUFrQkEsVUFFbEJ3QyxFQUFnQnJFLE1BQVE0QixFQUN4QjBDLEVBQWlCdEUsTUFBUTZCLEVBRXpCMEMsRUFBZSxxQkFBZkEsa0JBQ0ErRixHQUFheEIsVUFpQmYxRSxFQUFpQjNGLGlCQUFpQixTQWJsQyxXQUNFZ00sR0FBZ0IzQixPQUNoQnZFLEVBQWUsb0JBQWZBLHFCQWFGa0csR0FBZ0JhLG9CQUNoQnRCLEdBQW9Cc0Isb0JBQ3BCaEIsR0FBYWdCLG9CQUNiekMsR0FBZXlDLG9CQUNmaEMsR0FBOEJnQyxxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS1tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLW1lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0tbWVzdG8vLi9zcmMvdXRpbHMvdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtc0FycmF5KSB7XG4gICAgaXRlbXNBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW1IdG1sKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbUh0bWwpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5jb2RlID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgcG9wdXBJbWFnZVNlbGVjdG9yLCBpbWFnZVRpdGxlU2VsZWN0b3IgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cFBpY3R1cmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHBvcHVwSW1hZ2VTZWxlY3Rvcik7XG4gICAgdGhpcy5fcGljdHVyZVRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihpbWFnZVRpdGxlU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbihuYW1lLCBwaWMpIHtcbiAgICBzdXBlci5vcGVuKCk7XG5cbiAgICB0aGlzLl9waWN0dXJlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwUGljdHVyZS5zcmMgPSBwaWM7XG4gICAgdGhpcy5fcG9wdXBQaWN0dXJlLmFsdCA9IG5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHBvcHVwU2VsZWN0b3IsXG4gICAgc2VsZWN0b3JzQ29uZmlnLFxuICAgIGZvcm1TdWJtaXRIYW5kbGVyLFxuICAgIHN1Ym1pdEJ1dHRvblRleHQsXG4gIH0pIHtcbiAgICBzdXBlcih7XG4gICAgICBwb3B1cFNlbGVjdG9yLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHN1Ym1pdEJ1dHRvblRleHQ7XG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGZvcm1TdWJtaXRIYW5kbGVyO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yc0NvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBzZWxlY3RvcnNDb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX2lucHV0RmllbGRzID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzQ29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIHNob3dTYXZpbmdQcm9ncmVzcygpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzID0gKCkgPT4ge1xuICAgIHRoaXMuX3VzZXJJbnB1dERhdGEgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dEZpZWxkKSA9PiB7XG4gICAgICB0aGlzLl91c2VySW5wdXREYXRhW2lucHV0RmllbGQubmFtZV0gPSBpbnB1dEZpZWxkLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl91c2VySW5wdXREYXRhO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vINCi0L7QttC1INGB0L7QstC10YDRiNC10L3QvdC+INC90LUg0L/QvtC90Y/Quywg0LrQsNC6INGB0LTQtdC70LDRgtGMINGC0LDQuixcbiAgICAvLyDRh9GC0L7QsdGLINGG0LXQv9C+0YfQutCwINC/0YDQvtC80LjRgdCwINGD0YXQvtC00LjQu9CwINCy0L3Rg9GC0YDRjCDQvtCx0YDQsNCx0L7RgtGH0LjQutCwXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT5cbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSlcbiAgICApO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG5cbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJy5wb3B1cF9fY29uZmlybS1idXR0b24nXG4gICAgKTtcbiAgfVxuXG4gIGRpc2FibGVDb25maXJtQnV0dG9uKCkge1xuICAgIHRoaXMuX2NvbmZpcm1hdGlvbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gIH1cblxuICBzaG93RGVsZXRpb25Qcm9ncmVzcygpIHtcbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24udGV4dENvbnRlbnQgPSAn0KPQtNCw0LvQtdC90LjQtS4uLic7XG4gIH1cblxuICBfc2hvd0RlZmF1bHRCdXR0b25UZXh0KCkge1xuICAgIHRoaXMuX2NvbmZpcm1hdGlvbkJ1dHRvbi50ZXh0Q29udGVudCA9ICfQlNCwJztcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgc3VwZXIub3BlbigpO1xuXG4gICAgdGhpcy5fc2hvd0RlZmF1bHRCdXR0b25UZXh0KCk7XG4gICAgdGhpcy5fY29uZmlybWF0aW9uQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuXG4gIHNldENvbmZpcm1hdGlvbkhhbmRsZXIoc3VibWl0QWN0aW9uKSB7XG4gICAgdGhpcy5fY29uZmlybWF0aW9uSGFuZGxlciA9IHN1Ym1pdEFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9jb25maXJtYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgICAgdGhpcy5fY29uZmlybWF0aW9uSGFuZGxlcigpXG4gICAgKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJBYm91dFNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fY3VycmVudFVzZXJEYXRhID0ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgdXNlckFib3V0OiB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQsXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50VXNlckRhdGE7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKG5ld1VzZXJBdmF0YXIpIHtcbiAgICB0aGlzLl91c2VyQXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtuZXdVc2VyQXZhdGFyfSlgO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEuYWJvdXQ7XG4gICAgdGhpcy5fdXNlckF2YXRhci5hbHQgPSBuZXdVc2VyRGF0YS5uYW1lO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwLCDQutC+0LQgJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyhuZXdQcm9maWxlRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5ld1Byb2ZpbGVEYXRhLm1haW4sXG4gICAgICAgIGFib3V0OiBuZXdQcm9maWxlRGF0YS5zZWNvbmRhcnksXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB1cGRhdGVVc2VyQXZhdGFyKGF2YXRhckxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZ2V0VXBsb2FkZWRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXG4gICAgICAudGhlbigocmVzKSA9PiByZXMucmV2ZXJzZSgpKTtcbiAgfVxuXG4gIHVwbG9hZE5ld0NhcmQodXNlckNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB1c2VyQ2FyZERhdGEubWFpbixcbiAgICAgICAgbGluazogdXNlckNhcmREYXRhLnNlY29uZGFyeSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cbn1cbiIsIi8vINCe0LHRitGP0LLQu9C10L3QuNC1INCy0YHQtdGFINC60L7QvdGB0YLQsNC90YJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xuY29uc3QgcHJvZmlsZUVkaXRpbmdGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5lZGl0LWZvcm1fdHlwZV9wcm9maWxlLWVkaXQnXG4pO1xuXG5leHBvcnQgY29uc3QgbG9hZGluZ1BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRpbmctcG9wdXAnKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdGluZ0J1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcbiAgJy5wcm9maWxlX19lZGl0LWJ1dHRvbidcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1OYW1lID0gcHJvZmlsZUVkaXRpbmdGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICcuZWRpdC1mb3JtX19pbnB1dF90eXBlX25hbWUnXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm1BYm91dCA9IHByb2ZpbGVFZGl0aW5nRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAnLmVkaXQtZm9ybV9faW5wdXRfdHlwZV9hYm91dCdcbik7XG5cbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLyDQntCx0YrQtdC60YIg0YHQviDQstGB0LXQvNC4INC60LvQsNGB0YHQsNC80Lgg0Lgg0YHQtdC70LXQutGC0L7RgNCw0LzQuCwg0LjRgdC/0L7Qu9GM0LfRg9C10LzRi9C80Lgg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxuZXhwb3J0IGNvbnN0IGZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZWRpdC1mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5lZGl0LWZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZWRpdC1mb3JtX19zdWJtaXQtYnV0dG9uJyxcbiAgZGlzYWJsZWRTdWJtaXRCdXR0b25DbGFzczogJ2VkaXQtZm9ybV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ2VkaXQtZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHsgc2VsZWN0b3JzQ29uZmlnLCBmb3JtRWxlbWVudCB9KSB7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2Rpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MgPSBzZWxlY3RvcnNDb25maWcuZGlzYWJsZWRTdWJtaXRCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEZpZWxkRXJyb3JDbGFzcyA9IHNlbGVjdG9yc0NvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgc2VsZWN0b3JzQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzQ29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRJc0ludmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Rpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2Rpc2FibGVkU3VibWl0QnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fc2hvd0lucHV0VmFsaWRpdHlTdGF0ZShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0VmFsaWRpdHlTdGF0ZShpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dElzSW52YWxpZChpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRJc0ludmFsaWQoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRJc0ludmFsaWQoaW5wdXQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yVGV4dCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7XG5cbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RmllbGRFcnJvckNsYXNzKTtcbiAgICBlcnJvclRleHQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBfaGlkZUlucHV0SXNJbnZhbGlkKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JUZXh0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcblxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRGaWVsZEVycm9yQ2xhc3MpO1xuICAgIGVycm9yVGV4dC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRGaWVsZHMuc29tZSgoaW5wdXRGaWVsZCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEZpZWxkLnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG59XG4iLCIvLyDQmNC80L/QvtGA0YLRiyDQutC+0LzQv9C+0L3QtdC90YLQvtCyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcblxuLy8g0JjQvNC/0L7RgNGCINCy0YHQtdGFINC90YPQttC90YvRhSDQutC+0L3RgdGC0LDQvdGCXG5pbXBvcnQge1xuICBwcm9maWxlQXZhdGFyQnV0dG9uLFxuICBwcm9maWxlRWRpdGluZ0J1dHRvbixcbiAgZm9ybVNlbGVjdG9yc0FuZENsYXNzZXMsXG4gIHByb2ZpbGVBZGRCdXR0b24sXG4gIHByb2ZpbGVGb3JtTmFtZSxcbiAgcHJvZmlsZUZvcm1BYm91dCxcbiAgZm9ybVZhbGlkYXRvcnMsXG4gIGxvYWRpbmdQb3B1cCxcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuLy8g0J/QtdGA0LXQvNC10L3QvdCw0Y8g0LTQu9GPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQvtCz0L4gSURcbmV4cG9ydCBsZXQgdXNlcklkO1xuXG4vLyDQmNC80L/QvtGA0YIg0LLRgdC10YUg0LLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3Ri9GFINGE0YPQvdC60YbQuNC5XG5pbXBvcnQgeyBjcmVhdGVDYXJkLCBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xuXG4vLyDQpNGD0L3QutGG0LjRjyDRgNC10L3QtNC10YDQuNC90LPQsCDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudEh0bWwgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50SHRtbCk7XG59XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBTZWN0aW9uXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuICByZW5kZXJlcjogKGNhcmQpID0+IHtcbiAgICByZW5kZXJDYXJkKGNhcmQpO1xuICB9LFxuICBjb250YWluZXJTZWxlY3RvcjogJy5ncmlkLWVsZW1lbnRzJyxcbn0pO1xuXG4vLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9C+0L/QsNC/0LAg0LjQt9C+0LHRgNCw0LbQtdC90LjRj1xuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF90eXBlX29wZW5lZC1jYXJkJyxcbiAgcG9wdXBJbWFnZVNlbGVjdG9yOiAnLnBvcHVwX19waG90bycsXG4gIGltYWdlVGl0bGVTZWxlY3RvcjogJy5wb3B1cF9faW1hZ2UtdGl0bGUnLFxufSk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LvQsNGB0YHQsCBVc2VySW5mb1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxuICB1c2VyQWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dCcsXG4gIHVzZXJBdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInLFxufSk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0L7Qv9Cw0L/QsCDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmNvbnN0IGF2YXRhclVwZGF0aW5nUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wcm9maWxlLWF2YXRhci11cGRhdGUnLFxuICBzZWxlY3RvcnNDb25maWc6IGZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzLFxuICBmb3JtU3VibWl0SGFuZGxlcjogKG5ld1Byb2ZpbGVBdmF0YXIpID0+IHtcbiAgICBhdmF0YXJVcGRhdGluZ1BvcHVwLnNob3dTYXZpbmdQcm9ncmVzcygpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZVVzZXJBdmF0YXIobmV3UHJvZmlsZUF2YXRhci5zZWNvbmRhcnkpXG4gICAgICAudGhlbigodXNlck9iamVjdCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJPYmplY3QuYXZhdGFyKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiBhdmF0YXJVcGRhdGluZ1BvcHVwLmNsb3NlKCkpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCkpO1xuICB9LFxuICBzdWJtaXRCdXR0b25UZXh0OiAn0KHQvtGF0YDQsNC90LjRgtGMJyxcbn0pO1xuXG4vLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQutC70LDRgdGB0LAgUG9wdXBXaXRoRm9ybVxuLy8g0LTQu9GPINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfdHlwZV9wcm9maWxlLWVkaXQnLFxuICBzZWxlY3RvcnNDb25maWc6IGZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzLFxuXG4gIGZvcm1TdWJtaXRIYW5kbGVyOiAobmV3UHJvZmlsZURhdGEpID0+IHtcbiAgICBwcm9maWxlUG9wdXAuc2hvd1NhdmluZ1Byb2dyZXNzKCk7XG4gICAgYXBpXG4gICAgICAudXBkYXRlVXNlckluZm8obmV3UHJvZmlsZURhdGEpXG4gICAgICAudGhlbigobmV3UHJvZmlsZURhdGEpID0+IHVzZXJJbmZvLnNldFVzZXJJbmZvKG5ld1Byb2ZpbGVEYXRhKSlcbiAgICAgIC50aGVuKCgpID0+IHByb2ZpbGVQb3B1cC5jbG9zZSgpKVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LA6ICR7ZXJyfWApKTtcbiAgfSxcbiAgc3VibWl0QnV0dG9uVGV4dDogJ9Ch0L7RhdGA0LDQvdC40YLRjCcsXG59KTtcblxuLy8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm1cbi8vINC00LvRjyDQv9C+0L/QsNC/0LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgY2FyZEFkZGluZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfYWRkLWNhcmQnLFxuICBzZWxlY3RvcnNDb25maWc6IGZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzLFxuXG4gIGZvcm1TdWJtaXRIYW5kbGVyOiAodXNlckNhcmREYXRhKSA9PiB7XG4gICAgY2FyZEFkZGluZ1BvcHVwLnNob3dTYXZpbmdQcm9ncmVzcygpO1xuICAgIGFwaVxuICAgICAgLnVwbG9hZE5ld0NhcmQodXNlckNhcmREYXRhKVxuICAgICAgLnRoZW4oKHVzZXJDYXJkRGF0YSkgPT4ge1xuICAgICAgICByZW5kZXJDYXJkKHVzZXJDYXJkRGF0YSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4gY2FyZEFkZGluZ1BvcHVwLmNsb3NlKCkpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsDogJHtlcnJ9YCkpO1xuICB9LFxuICBzdWJtaXRCdXR0b25UZXh0OiAn0KHQvtC30LTQsNGC0YwnLFxufSk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0L7Qv9Cw0L/QsCDRgSDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjQtdC8INGD0LTQsNC70LXQvdC40Y9cbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhEZWxldGlvbkNvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oe1xuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfZGVsZXRlLWNvbmZpcm1hdGlvbicsXG59KTtcblxuLy8g0JjQvdC40LDRhtC40LDQu9C40LfQsNGG0LjRjyDQutC70LDRgdGB0LAgQXBpXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQ0JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdjZjBjMDhmMi04ZjJkLTQxOGYtOWVhYi0zNWM0MTA0ZDg2MDcnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH0sXG59KTtcblxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0Y7Qt9C10YDQtSDQuCDQtdCz0L4g0LDQstCw0YLQsNGA0LrQuCDRgSDRgdC10YDQstC10YDQsCDQvdCwINGB0YLRgNCw0L3QuNGG0YNcbi8vINC4INC30LDQs9GA0YPQt9C60LAg0LLRgdC10YUg0LrQsNGA0YLQvtGH0LXQulxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0VXBsb2FkZWRDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gICAgbG9hZGluZ1BvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwOiAke2Vycn1gKSk7XG5cbi8vINCS0LrQu9GO0YfQtdC90LjQtSDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcbmVuYWJsZVZhbGlkYXRpb24oZm9ybVNlbGVjdG9yc0FuZENsYXNzZXMpO1xuXG4vLyDQpNGD0L3QutGG0LjRjywg0L7RgtC60YDRi9Cy0LDRjtGJ0LDRjyDQv9C+0L/QsNC/INGBINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LXQvCDQv9GA0L7RhNC40LvRj1xuZnVuY3Rpb24gb3BlblByb2ZpbGVQb3B1cCgpIHtcbiAgY29uc3QgeyB1c2VyTmFtZSwgdXNlckFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIHByb2ZpbGVGb3JtTmFtZS52YWx1ZSA9IHVzZXJOYW1lO1xuICBwcm9maWxlRm9ybUFib3V0LnZhbHVlID0gdXNlckFib3V0O1xuXG4gIGZvcm1WYWxpZGF0b3JzWydpbmZvLWVkaXRpbmctZm9ybSddLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwcm9maWxlUG9wdXAub3BlbigpO1xufVxuXG4vLyDQpNGD0L3QutGG0LjRjywg0L7RgtC60YDRi9Cy0LDRjtGJ0LDRjyDQv9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZnVuY3Rpb24gb3BlbkNhcmRBZGRpbmdQb3B1cCgpIHtcbiAgY2FyZEFkZGluZ1BvcHVwLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRvcnNbJ2NhcmQtYWRkaW5nLWZvcm0nXS5yZXNldFZhbGlkYXRpb24oKTtcbn1cblxuZnVuY3Rpb24gb3BlbkF2YXRhclVwZGF0aW5nUG9wdXAoKSB7XG4gIGF2YXRhclVwZGF0aW5nUG9wdXAub3BlbigpO1xuICBmb3JtVmFsaWRhdG9yc1snYXZhdGFyLXVwZGF0aW5nLWZvcm0nXS5yZXNldFZhbGlkYXRpb24oKTtcbn1cblxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0YHQu9GD0YjQsNGC0LXQu9C10LlcbnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQXZhdGFyVXBkYXRpbmdQb3B1cCk7XG5wcm9maWxlRWRpdGluZ0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qcm9maWxlUG9wdXApO1xucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5DYXJkQWRkaW5nUG9wdXApO1xuXG5jYXJkQWRkaW5nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmF2YXRhclVwZGF0aW5nUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGNhcmREYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICB1c2VySWQsXG4gICAgaW1hZ2VDbGlja0hhbmRsZXIsXG4gICAgbGlrZUhhbmRsZXIsXG4gICAgcmVtb3ZlTGlrZUhhbmRsZXIsXG4gIH0pIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkTmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fY2FyZFBpYyA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZE93bmVySWQgPSBjYXJkRGF0YS5vd25lci5faWQ7XG4gICAgdGhpcy5fY2FyZExpa2VzID0gY2FyZERhdGEubGlrZXM7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuXG4gICAgdGhpcy5faW1hZ2VDbGlja0hhbmRsZXIgPSBpbWFnZUNsaWNrSGFuZGxlcjtcbiAgICB0aGlzLl9saWtlSGFuZGxlciA9IGxpa2VIYW5kbGVyO1xuICAgIHRoaXMuX3JlbW92ZUxpa2VIYW5kbGVyID0gcmVtb3ZlTGlrZUhhbmRsZXI7XG5cbiAgICB0aGlzLmNhcmRJZCA9IGNhcmREYXRhLl9pZDtcbiAgfVxuXG4gIF9nZXRDYXJkVGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gdGhpcy5fY2FyZEVsZW1lbnQuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLWVsZW1lbnRzX19pdGVtJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG5cbiAgX3VwZGF0ZUxpa2VDb3VudGVyU3RhdGUoY2FyZExpa2VDb3VudGVyLCBjYXJkTGlrZXNBcnJheUxlbmd0aCkge1xuICAgIGlmIChjYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgIT0gJzAnIHx8IGNhcmRMaWtlc0FycmF5TGVuZ3RoID49IDEpIHtcbiAgICAgIGNhcmRMaWtlQ291bnRlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9IGVsc2Uge1xuICAgICAgY2FyZExpa2VDb3VudGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSWZDYXJkSXNMaWtlZChsaWtlcykge1xuICAgIHJldHVybiBsaWtlcy5zb21lKChsaWtlRWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGxpa2VFbGVtZW50Ll9pZCA9PT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgaWYgKCF0aGlzLl9jaGVja0lmQ2FyZElzTGlrZWQodGhpcy5fY2FyZExpa2VzKSkge1xuICAgICAgdGhpcy5fbGlrZUhhbmRsZXIoKVxuICAgICAgICAudGhlbigobGlrZXNPYmplY3QpID0+IHtcbiAgICAgICAgICB0aGlzLl9jYXJkTGlrZXMgPSBsaWtlc09iamVjdC5saWtlcztcbiAgICAgICAgICByZXR1cm4gdGhpcy5fY2FyZExpa2VzO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbigobGlrZXNBcnJheSkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2VzQXJyYXkubGVuZ3RoO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUxpa2VDb3VudGVyU3RhdGUoXG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIsXG4gICAgICAgICAgICBsaWtlc0FycmF5Lmxlbmd0aFxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJykpXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW1vdmVMaWtlSGFuZGxlcigpXG4gICAgICAgIC50aGVuKChsaWtlc09iamVjdCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NhcmRMaWtlcyA9IGxpa2VzT2JqZWN0Lmxpa2VzO1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZXM7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChsaWtlc0FycmF5KSA9PiB7XG4gICAgICAgICAgdGhpcy5fY2FyZExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZXNBcnJheS5sZW5ndGg7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlTGlrZUNvdW50ZXJTdGF0ZShcbiAgICAgICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlcixcbiAgICAgICAgICAgIGxpa2VzQXJyYXkubGVuZ3RoXG4gICAgICAgICAgKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT5cbiAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXG4gICAgICAgIClcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vINCi0LDQuiDQuCDQvdC1INC/0L7QvdGP0Lsg0LjQtNC10Y4g0YEg0L/QtdGA0LXQtNCw0YfQtdC5IHRoaXMg0LIg0LLRi9C30L7QsiDRhNGD0L3QutGG0LjQuC4uLlxuICAgIC8vINCd0LUg0L/QvtC90LjQvNCw0Y4sINC60LDQuiDRjdGC0L4g0LTQvtC70LbQvdC+INCx0YvRgtGMINGA0LXQsNC70LjQt9C+0LLQsNC90L4oXG5cbiAgICAvLyDQodC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INC70LDQudC60LBcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuXG4gICAgLy8g0KHQu9GD0YjQsNGC0LXQu9GMINC60L3QvtC/0LrQuCDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vcGVuQ29uZmlybWF0aW9uUG9wdXAoKTtcbiAgICAgIH0pO1xuXG4gICAgLyog0KHQu9GD0YjQsNGC0LXQu9GMINC90LAg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQsiDQutCw0YDRgtC+0YfQutC1XG4gICAgICDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDRhNGD0LvRgdC60YDQuNC9INC/0L7Qv9Cw0L/QsCAqL1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2ltYWdlQ2xpY2tIYW5kbGVyKHRoaXMuX2NhcmROYW1lLCB0aGlzLl9jYXJkUGljKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIHNldFRyYXNoSWNvbkNsaWNrSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgdGhpcy5fb3BlbkNvbmZpcm1hdGlvblBvcHVwID0gaGFuZGxlcjtcbiAgfVxuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3Bob3RvJyk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJyk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xuICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnRlcicpO1xuXG4gICAgaWYgKHRoaXMuX2NhcmRPd25lcklkID09PSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY2hlY2tJZkNhcmRJc0xpa2VkKHRoaXMuX2NhcmRMaWtlcykpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX25hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmROYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9jYXJkTmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fY2FyZFBpYztcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkTGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX3VwZGF0ZUxpa2VDb3VudGVyU3RhdGUodGhpcy5fY2FyZExpa2VDb3VudGVyKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7IGZvcm1WYWxpZGF0b3JzIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQge1xuICBhcGksXG4gIHBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uLFxuICBwb3B1cFdpdGhJbWFnZSxcbiAgdXNlcklkLFxufSBmcm9tICcuLi9wYWdlcy9pbmRleC5qcyc7XG5cbi8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQsiDRhNGD0LvRgdC60YDQuNC9XG5mdW5jdGlvbiBvcGVuRnVsbHNjcmVlbkltYWdlKG5hbWUsIHBpYykge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIHBpYyk7XG59XG5cbmZ1bmN0aW9uIG9wZW5DYXJkRGVsZXRpb25Qb3B1cChjYXJkKSB7XG4gIHBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uLm9wZW4oKTtcbiAgcG9wdXBXaXRoRGVsZXRpb25Db25maXJtYXRpb24uc2V0Q29uZmlybWF0aW9uSGFuZGxlcigoKSA9PiB7XG4gICAgcG9wdXBXaXRoRGVsZXRpb25Db25maXJtYXRpb24uZGlzYWJsZUNvbmZpcm1CdXR0b24oKTtcbiAgICBwb3B1cFdpdGhEZWxldGlvbkNvbmZpcm1hdGlvbi5zaG93RGVsZXRpb25Qcm9ncmVzcygpO1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5jYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xuICAgICAgfSlcbiAgICAgIC50aGVuKCgpID0+IHBvcHVwV2l0aERlbGV0aW9uQ29uZmlybWF0aW9uLmNsb3NlKCkpXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgfSk7XG59XG5cbi8vINCk0YPQvdC60YbQuNGPINCy0LrQu9GO0YfQtdC90LjRjyDQstCw0LvQuNC00LDRhtC40Lgg0LTQu9GPINCy0YHQtdGFINGE0L7RgNC8INC90LAg0YHRgtGA0LDQvdC40YbQtVxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oc2VsZWN0b3JzQ29uZmlnKSB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yc0NvbmZpZy5mb3JtU2VsZWN0b3IpXG4gICk7XG5cbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih7XG4gICAgICBzZWxlY3RvcnNDb25maWc6IHNlbGVjdG9yc0NvbmZpZyxcbiAgICAgIGZvcm1FbGVtZW50OiBmb3JtRWxlbWVudCxcbiAgICB9KTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuXG4vLyDQpNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICBjYXJkRGF0YTogY2FyZERhdGEsXG4gICAgY2FyZFNlbGVjdG9yOiAnLmNhcmRzLXRlbXBsYXRlJyxcbiAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICBpbWFnZUNsaWNrSGFuZGxlcjogb3BlbkZ1bGxzY3JlZW5JbWFnZSxcbiAgICBsaWtlSGFuZGxlcjogKCkgPT5cbiAgICAgIGFwaS5saWtlQ2FyZChjYXJkRGF0YS5faWQpLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSksXG4gICAgcmVtb3ZlTGlrZUhhbmRsZXI6ICgpID0+XG4gICAgICBhcGkudW5saWtlQ2FyZChjYXJkRGF0YS5faWQpLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSksXG4gIH0pO1xuICBjYXJkLnNldFRyYXNoSWNvbkNsaWNrSGFuZGxlcigoKSA9PiB7XG4gICAgb3BlbkNhcmREZWxldGlvblBvcHVwKGNhcmQpO1xuICB9KTtcbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJ0aGlzIiwiX2NvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9yZW5kZXJlciIsIml0ZW1zQXJyYXkiLCJmb3JFYWNoIiwiaXRlbSIsIml0ZW1IdG1sIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImNvZGUiLCJjbG9zZSIsIl9wb3B1cCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwSW1hZ2VTZWxlY3RvciIsImltYWdlVGl0bGVTZWxlY3RvciIsIl9wb3B1cFBpY3R1cmUiLCJfcGljdHVyZVRpdGxlIiwibmFtZSIsInBpYyIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsInNlbGVjdG9yc0NvbmZpZyIsImZvcm1TdWJtaXRIYW5kbGVyIiwic3VibWl0QnV0dG9uVGV4dCIsIl91c2VySW5wdXREYXRhIiwiX2lucHV0RmllbGRzIiwiaW5wdXRGaWVsZCIsInZhbHVlIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfc3VibWl0SGFuZGxlciIsIl9mb3JtIiwiZm9ybVNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9jb25maXJtYXRpb25CdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJfc2hvd0RlZmF1bHRCdXR0b25UZXh0IiwicmVtb3ZlQXR0cmlidXRlIiwic3VibWl0QWN0aW9uIiwiX2NvbmZpcm1hdGlvbkhhbmRsZXIiLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VyQWJvdXRTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXQiLCJfdXNlckF2YXRhciIsIl9jdXJyZW50VXNlckRhdGEiLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsIm5ld1VzZXJBdmF0YXIiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsIm5ld1VzZXJEYXRhIiwiYWJvdXQiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwibmV3UHJvZmlsZURhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1haW4iLCJzZWNvbmRhcnkiLCJhdmF0YXJMaW5rIiwiYXZhdGFyIiwicmV2ZXJzZSIsInVzZXJDYXJkRGF0YSIsImxpbmsiLCJjYXJkSWQiLCJwcm9maWxlIiwicHJvZmlsZUVkaXRpbmdGb3JtIiwibG9hZGluZ1BvcHVwIiwicHJvZmlsZUF2YXRhckJ1dHRvbiIsInByb2ZpbGVFZGl0aW5nQnV0dG9uIiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVGb3JtTmFtZSIsInByb2ZpbGVGb3JtQWJvdXQiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1TZWxlY3RvcnNBbmRDbGFzc2VzIiwiZGlzYWJsZWRTdWJtaXRCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9kaXNhYmxlZFN1Ym1pdEJ1dHRvbkNsYXNzIiwiX2lucHV0RmllbGRFcnJvckNsYXNzIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUiLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0SXNJbnZhbGlkIiwiX3Nob3dJbnB1dFZhbGlkaXR5U3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImVuYWJsZVN1Ym1pdEJ1dHRvbiIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRJc0ludmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yVGV4dCIsImlkIiwic29tZSIsInVzZXJJZCIsIkNhcmQiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImltYWdlQ2xpY2tIYW5kbGVyIiwibGlrZUhhbmRsZXIiLCJyZW1vdmVMaWtlSGFuZGxlciIsIl9jYXJkRWxlbWVudCIsIl9jYXJkTmFtZSIsIl9jYXJkUGljIiwiX2NhcmRPd25lcklkIiwib3duZXIiLCJfaWQiLCJfY2FyZExpa2VzIiwibGlrZXMiLCJfdXNlcklkIiwiX2ltYWdlQ2xpY2tIYW5kbGVyIiwiX2xpa2VIYW5kbGVyIiwiX3JlbW92ZUxpa2VIYW5kbGVyIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRMaWtlQ291bnRlciIsImNhcmRMaWtlc0FycmF5TGVuZ3RoIiwiZGlzcGxheSIsImxpa2VFbGVtZW50IiwiX2NoZWNrSWZDYXJkSXNMaWtlZCIsImxpa2VzT2JqZWN0IiwibGlrZXNBcnJheSIsIl9jYXJkTGlrZUNvdW50ZXIiLCJsZW5ndGgiLCJfdXBkYXRlTGlrZUNvdW50ZXJTdGF0ZSIsIl9saWtlQnV0dG9uIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9lbGVtZW50IiwiX29wZW5Db25maXJtYXRpb25Qb3B1cCIsIl9jYXJkSW1hZ2UiLCJoYW5kbGVyIiwiX2dldENhcmRUZW1wbGF0ZSIsIl9kZWxldGVCdXR0b24iLCJvcGVuRnVsbHNjcmVlbkltYWdlIiwicG9wdXBXaXRoSW1hZ2UiLCJvcGVuIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50SHRtbCIsImNhcmQiLCJhcGkiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJzZXRUcmFzaEljb25DbGlja0hhbmRsZXIiLCJwb3B1cFdpdGhEZWxldGlvbkNvbmZpcm1hdGlvbiIsInNldENvbmZpcm1hdGlvbkhhbmRsZXIiLCJkaXNhYmxlQ29uZmlybUJ1dHRvbiIsInNob3dEZWxldGlvblByb2dyZXNzIiwicmVtb3ZlQ2FyZCIsIm9wZW5DYXJkRGVsZXRpb25Qb3B1cCIsImNyZWF0ZUNhcmQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsInVzZXJJbmZvIiwiYXZhdGFyVXBkYXRpbmdQb3B1cCIsIm5ld1Byb2ZpbGVBdmF0YXIiLCJzaG93U2F2aW5nUHJvZ3Jlc3MiLCJ1cGRhdGVVc2VyQXZhdGFyIiwidXNlck9iamVjdCIsInNldFVzZXJBdmF0YXIiLCJwcm9maWxlUG9wdXAiLCJ1cGRhdGVVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2FyZEFkZGluZ1BvcHVwIiwidXBsb2FkTmV3Q2FyZCIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldFVwbG9hZGVkQ2FyZHMiLCJ1c2VyRGF0YSIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=